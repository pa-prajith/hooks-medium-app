import React, {Fragment, useEffect} from 'react'
import useFetch from 'hooks/useFetch'
import FeedItemUser from 'components/feeditemuser'
import TagList from 'components/taglist'

const Article = (props) => {
    const slug = props.match.params.slug
    const apiUrl = `/articles/${slug}`
    const [{error, response, isLoading}, doFetch] = useFetch(apiUrl)
    console.log(response)
    useEffect(() => {
        doFetch()
    }, [doFetch])
    return (
        <div>
          { 
            !isLoading && response && response.article && (
                <Fragment>
                    <div className="page-header">
                        <div className="page-content">
                            <h2>{response.article.title}</h2>
                            <FeedItemUser article={response.article} />
                        </div>
                    </div>
                    <div className="page-body">
                        <p>
                            {response.article.body}
                        </p>
                        <TagList article={response.article} />
                    </div>
                </Fragment>
            )
            }
        </div>
    )
}

export default Article
