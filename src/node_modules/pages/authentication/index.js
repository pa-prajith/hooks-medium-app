import React, {useState} from 'react'
import { Link } from 'react-router-dom'
import useFetch from 'hooks/useFetch';

const Authentication = () => {
    const [email, setEmail] = useState('')
    const [password, setPassword] = useState('')
    const [ { isLoading, response, error }, doFetch ] = useFetch('/users/login')

    console.log(isLoading, response, error)

    const submitHandler = e => {
        e.preventDefault()
        doFetch({
            method: 'post',
            data: {
                user: {
                    email,
                    password
                }
            }
        })
    }
    return (
        <div className="auth-page-content">
            <form onSubmit={submitHandler}>
                <ul className="auth-container">
                    <li className="center"><h2>Sign In</h2></li>
                    <li className="center"><Link to="">Need a new account?</Link></li>
                    <li><input className="w-100" type="email" placeholder="Email" name="email" id="email" value={email} onChange={ e => setEmail(e.target.value) }/></li>
                    <li><input className="w-100" type="password" placeholder="Password" name="password" id="password" value={password} onChange={ e => setPassword(e.target.value) } /></li>
                    <li className="center"><button disabled={isLoading} type="submit">Sign In</button></li>
                </ul>
            </form>
        </div>
    )
}

export default Authentication
