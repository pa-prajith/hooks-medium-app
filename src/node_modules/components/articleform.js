import React, {useState, useEffect} from 'react'

const ArticleForm = ({errors, onSubmitHandler, initialValues}) => {
    const [title, setTitle] = useState('')
    const [description, setDescription] = useState('')
    const [body, setBody] = useState('')
    const [taglist, setTaglist] = useState('')

    const submitHandler = e => {
        e.preventDefault();
        const article = {
            title,
            description,
            body,
            tagList: taglist.split(' ')
        }
        onSubmitHandler(article)
    }

    useEffect(() => {
        setTitle(initialValues.title)
        setDescription(initialValues.description)
        setBody(initialValues.body)
        setTaglist(initialValues.taglist && initialValues.taglist.join(' '))
    }, [initialValues])

    return (
        <div className="article-container">
            <form onSubmit={submitHandler}>
                <ul className="article-table">
                    <li className="article-row"><h2>Express Your Thoughts</h2></li>
                    <li className="article-row">
                        <input type="text" className="w-100" value={title} onChange={e=>setTitle(e.target.value)} name="title" placeholder="Article Title"/>
                    </li>
                    <li className="article-row">
                        <input type="text" className="w-100" value={description} onChange={e=>setDescription(e.target.value)} name="description" placeholder="What is this article about?"/>
                    </li>
                    <li className="article-row">
                        <textarea name="body" className="w-100-no-h" defaultValue={body} onChange={e=>setBody(e.target.value)} cols="20" rows="10" placeholder="Write your article (in markdown)"></textarea>
                    </li>
                    <li className="article-row">
                        <input type="text" value={taglist} onChange={e=>setTaglist(e.target.value)} className="w-100" name="taglist"/>
                    </li>
                    <li className="article-row">
                        <button onChange={submitHandler}>Publish Article</button>
                    </li>
                </ul>
            </form>
        </div>
    )
}

export default ArticleForm
