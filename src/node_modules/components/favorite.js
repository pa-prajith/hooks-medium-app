import React from 'react'
import useFetch from 'hooks/useFetch'
const Favorite = ({isFavorite, favoriteCount, slug}) => {
    const apiUrl = `/articles/${slug}/favorite`
    const [{response}, doFetch] = useFetch(apiUrl)
    const isFav = response ? response.article.favorited : isFavorite
    const isFavCount = response ? response.article.favoritesCount : favoriteCount
    const heartClass = isFav ? 'fa fa-heart' : 'fa fa-heart-o'

    const handleClick = e => {
        e.preventDefault();
        doFetch({
            method: isFav ? 'delete' : 'post'
        })
    }
    
    return (
        <div className="item-favorite">
            <i className={heartClass} onClick={handleClick} aria-hidden="true"></i>
            {isFavCount}
        </div>
    )
}

export default Favorite
